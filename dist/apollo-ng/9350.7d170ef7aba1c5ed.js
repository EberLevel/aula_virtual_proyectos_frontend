"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[9350],{9350:(z,p,l)=>{l.r(p),l.d(p,{CalendarAppModule:()=>G});var g=l(6814),c=l(6223),h=l(8007),Z=l(5932),E=l(6111),y=l(3023),t=l(8926),v=l(6031),m=l(2495),u=l(3530),M=l(5219),f=l(6218),_=l(6760),C=l(3714),x=l(3965);function A(o,r){if(1&o&&(t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu("display"===e.view?e.changedEvent.title:"new"===e.view?"Nuevo Evento":"Editar Evento")}}function b(o,r){if(1&o&&(t.TgZ(0,"div")(1,"div",9)(2,"div",10)(3,"div",11),t._uU(4,"Inicio"),t.qZA(),t.TgZ(5,"p",12),t._UZ(6,"i",13),t.TgZ(7,"span"),t._uU(8),t.qZA()()(),t.TgZ(9,"div",10)(10,"div",11),t._uU(11,"Fin"),t.qZA(),t.TgZ(12,"p",12),t._UZ(13,"i",13),t.TgZ(14,"span"),t._uU(15),t.qZA()()(),t.TgZ(16,"div",14)(17,"div",11),t._uU(18,"Color"),t.qZA(),t.TgZ(19,"p",12),t._UZ(20,"span",15),t.TgZ(21,"span"),t._uU(22),t.qZA()()()()()),2&o){const e=t.oxw(2);t.xp6(8),t.Oqu(e.changedEvent.start.toISOString().slice(0,10)),t.xp6(7),t.Oqu(e.changedEvent.end.toISOString().slice(0,10)),t.xp6(5),t.Udp("background-color",e.changedEvent.tag.color),t.xp6(2),t.Oqu(e.changedEvent.tag.name)}}function w(o,r){if(1&o&&(t.TgZ(0,"div",37),t._UZ(1,"div",38),t.TgZ(2,"div"),t._uU(3),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(1),t.Udp("background-color",e.changedEvent.tag.color),t.xp6(2),t.Oqu(e.changedEvent.tag.name)}}function D(o,r){if(1&o&&t.YNc(0,w,4,3,"div",36),2&o){const e=t.oxw(3);t.Q6J("ngIf",e.changedEvent.tag)}}function S(o,r){if(1&o&&(t.TgZ(0,"div",37),t._UZ(1,"div",38),t.TgZ(2,"div"),t._uU(3),t.qZA()()),2&o){const e=r.$implicit;t.xp6(1),t.Udp("background-color",e.color),t.xp6(2),t.Oqu(e.name)}}function O(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",16)(2,"div",17)(3,"label",18),t._uU(4,"T\xedtulo"),t.qZA(),t.TgZ(5,"span",19),t._UZ(6,"i",20),t.TgZ(7,"input",21),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changedEvent.title=a)}),t.qZA()()(),t.TgZ(8,"div",17)(9,"label",22),t._uU(10,"Ubicaci\xf3n"),t.qZA(),t.TgZ(11,"span",19),t._UZ(12,"i",23),t.TgZ(13,"input",24),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changedEvent.location=a)}),t.qZA()()(),t.TgZ(14,"div",25)(15,"label",26),t._uU(16,"Descripci\xf3n del evento"),t.qZA(),t.TgZ(17,"textarea",27),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changedEvent.description=a)}),t.qZA()(),t.TgZ(18,"div",17)(19,"label",28),t._uU(20,"Fecha de Inicio"),t.qZA(),t.TgZ(21,"p-calendar",29),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changedEvent.start=a)}),t.qZA()(),t.TgZ(22,"div",17)(23,"label",30),t._uU(24,"Fecha Fin"),t.qZA(),t.TgZ(25,"p-calendar",31),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changedEvent.end=a)}),t.qZA()(),t.TgZ(26,"div",25)(27,"label",32),t._uU(28,"Color"),t.qZA(),t.TgZ(29,"p-dropdown",33),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changedEvent.tag=a)}),t.YNc(30,D,1,1,"ng-template",34),t.YNc(31,S,4,3,"ng-template",35),t.qZA()()()()}if(2&o){const e=t.oxw(2),n=t.MAs(3);t.xp6(7),t.Q6J("ngModel",e.changedEvent.title),t.xp6(6),t.Q6J("ngModel",e.changedEvent.location),t.xp6(4),t.Q6J("rows",5)("ngModel",e.changedEvent.description),t.xp6(4),t.Q6J("appendTo",n)("maxDate",e.changedEvent.end)("showTime",!0)("required",!0)("ngModel",e.changedEvent.start),t.xp6(4),t.Q6J("appendTo",n)("minDate",e.changedEvent.start)("showTime",!0)("required",!0)("ngModel",e.changedEvent.end),t.xp6(4),t.Q6J("appendTo",n)("options",e.tags)("ngModel",e.changedEvent.tag)}}function U(o,r){if(1&o&&(t.YNc(0,b,23,5,"div",8),t.YNc(1,O,32,17,"div",8)),2&o){const e=t.oxw();t.Q6J("ngIf","display"===e.view),t.xp6(1),t.Q6J("ngIf","display"!==e.view)}}function k(o,r){}const J=function(){return{width:"36rem"}},I=function(){return{"960px":"75vw","640px":"90vw"}};let N=(()=>{class o{constructor(e){this.eventService=e,this.events=[],this.today="",this.calendarOptions={initialView:"dayGridMonth"},this.showDialog=!1,this.clickedEvent=null,this.dateClicked=!1,this.edit=!1,this.tags=[],this.view="",this.courseStyles={}}ngOnInit(){this.today=(new Date).toISOString().split("T")[0],this.eventService.getEventsAlumno({alumno_id:1,domain_id:1}).subscribe(n=>{this.events=this.getEventsAlumno(n),this.calendarOptions={...this.calendarOptions,events:this.events},this.tags=this.events.map(a=>{if(!this.tags.includes(a.tag))return a.tag})}),this.calendarOptions={plugins:[Z.Z,y.Z,E.ZP],height:720,initialDate:this.today,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,eventClick:n=>this.onEventClick(n),select:n=>this.onDateSelect(n),events:this.events}}getEventsAlumno(e){const n=e.map(a=>{const i=JSON.parse(a.horarios);return this.generateEventDetails(i,a.nombre)});return console.log(n.flat()),n.flat()}generateEventDetails(e,n){const a=[],i=this.getCourseStyles(n);return e.forEach(d=>{const H=new Date(d.fecha_inicio),Y=new Date(d.fecha_fin),T=d.day_id;for(let s=new Date(H);s<=Y;s=this.addDays(s,1))if(s.getDay()===T%7){const j=`${s.toISOString().split("T")[0]}T${d.hora_inicio}`,K=`${s.toISOString().split("T")[0]}T${d.hora_fin}`;a.push({day_name:this.getDayName(T),date:s.toISOString().split("T")[0],end:K,start:j,tag:{color:"#FFD700",name:n+"-"+d.docente_name},title:n,borderColor:i.borderColor,backgroundColor:i.backgroundColor,textColor:i.textColor})}}),a}getCourseStyles(e){if(this.courseStyles[e])return this.courseStyles[e];const n=this.generateStyles();return this.courseStyles[e]=n,n}getDayName(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e%7]}addDays(e,n){const a=new Date(e);return a.setDate(a.getDate()+n),a}generateStyles(){const n=["#f9e79f","#a3e4d7","#abebc6","#f5b041","#ec7063","#cacfd2"],a=["#000000"],i=n[Math.floor(Math.random()*n.length)];return{backgroundColor:i,borderColor:i,textColor:a[Math.floor(Math.random()*a.length)]}}onEventClick(e){this.clickedEvent=e.event;let n=e.event.toPlainObject({collapseExtendedProps:!0,collapseColor:!0});this.view="display",this.showDialog=!0,this.changedEvent={...n,...this.clickedEvent},this.changedEvent.start=this.clickedEvent.start,this.changedEvent.end=this.clickedEvent.end?this.clickedEvent.end:this.clickedEvent.start}onDateSelect(e){}handleSave(){this.validate()&&(this.showDialog=!1,this.clickedEvent={...this.changedEvent,backgroundColor:this.changedEvent.tag.color,borderColor:this.changedEvent.tag.color,textColor:"#212121"},this.events=this.clickedEvent.hasOwnProperty("id")?this.events.map(e=>e.id.toString()===this.clickedEvent.id.toString()?e=this.clickedEvent:e):[...this.events,{...this.clickedEvent,id:Math.floor(1e4*Math.random())}],this.calendarOptions={...this.calendarOptions,events:this.events},this.clickedEvent=null)}onEditClick(){this.view="edit"}delete(){this.events=this.events.filter(e=>e.id.toString()!==this.clickedEvent.id.toString()),this.calendarOptions={...this.calendarOptions,events:this.events},this.showDialog=!1}validate(){let{start:e,end:n}=this.changedEvent;return e&&n}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(v.P))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:7,vars:9,consts:[[1,"card"],[3,"options"],[3,"visible","breakpoints","modal","closable","visibleChange","onHide"],["dd",""],["pTemplate","header"],["pTemplate","content"],["pTemplate","footer"],[1,"text-900","font-semibold","text-xl"],[4,"ngIf"],[1,"grid"],[1,"col-6"],[1,"text-900","font-semibold","mb-2"],[1,"flex","align-items-center","m-0"],[1,"pi","pi-fw","pi-clock","text-700","mr-2"],[1,"col-12"],[1,"inline-flex","flex-shrink-0","w-1rem","h-1rem","mr-2","border-circle"],[1,"grid","p-fluid","formgrid"],[1,"col-12","md:col-6","field"],["for","title",1,"text-900","font-semibold"],[1,"p-input-icon-left"],[1,"pi","pi-pencil"],["id","title","type","text","pInputText","","placeholder","T\xedtulo",3,"ngModel","ngModelChange"],["for","location",1,"text-900","font-semibold"],[1,"pi","pi-map-marker"],["id","location","type","text","pInputText","","placeholder","Ubicaci\xf3n",3,"ngModel","ngModelChange"],[1,"col-12","field"],["for","description",1,"text-900","font-semibold"],["id","description","type","text","pInputTextarea","",2,"resize","none",3,"rows","ngModel","ngModelChange"],["for","start",1,"text-900","font-semibold"],["dateFormat","dd-mm-yy","inputId","start",3,"appendTo","maxDate","showTime","required","ngModel","ngModelChange"],["for","end",1,"text-900","font-semibold"],["dateFormat","dd-mm-yy","inputId","end",3,"appendTo","minDate","showTime","required","ngModel","ngModelChange"],["for","company-color",1,"text-900","font-semibold"],["inputId","company-color","optionLabel","name",3,"appendTo","options","ngModel","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["class","flex align-items-center",4,"ngIf"],[1,"flex","align-items-center"],[1,"flex-shrink-0","w-1rem","h-1rem","mr-2","border-circle"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"full-calendar",1),t.TgZ(2,"p-dialog",2,3),t.NdJ("visibleChange",function(d){return a.showDialog=d})("onHide",function(){return a.view=""}),t.YNc(4,A,2,1,"ng-template",4),t.YNc(5,U,2,2,"ng-template",5),t.YNc(6,k,0,0,"ng-template",6),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("options",a.calendarOptions),t.xp6(1),t.Akn(t.DdM(7,J)),t.Q6J("visible",a.showDialog)("breakpoints",t.DdM(8,I))("modal",!0)("closable",!0))},dependencies:[g.O5,c.Fj,c.JJ,c.Q7,c.On,m.w,u.V,M.jx,f.g,_.f,C.o,x.Lt],styles:["@media screen and (max-width: 768px){[_nghost-%COMP%]     .fc .fc-toolbar{justify-content:center}[_nghost-%COMP%]     .fc-header-toolbar{display:flex;align-items:center;gap:1rem;justify-content:center;text-align:center;flex-wrap:wrap}[_nghost-%COMP%]     .fc-header-toolbar .fc-toolbar-chunk:nth-child(2){width:100%;order:0}[_nghost-%COMP%]     .fc-header-toolbar .fc-toolbar-chunk:nth-child(1){order:1}[_nghost-%COMP%]     .fc-header-toolbar .fc-toolbar-chunk:nth-child(3){order:2}[_nghost-%COMP%]     .fc-header-toolbar .fc-toolbar-chunk:nth-child(3) .fc-button-group .fc-today-button{margin-left:2rem}}"]})}return o})(),F=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild([{path:"",component:N}]),h.Bz]})}return o})();var q=l(707),P=l(4480),Q=l(4104);let G=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({providers:[v.P],imports:[g.ez,c.u5,F,m.z,u.S,f.A,q.hJ,_._8,C.j,x.kW,Q.EV,P.T]})}return o})()}}]);