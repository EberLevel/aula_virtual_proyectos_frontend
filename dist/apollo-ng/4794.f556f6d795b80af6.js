"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[4794],{4794:(M,g,n)=>{n.r(g),n.d(g,{ConfiguracionEmpresaModule:()=>G});var o=n(6223),m=n(6760),u=n(3530),d=n(707),h=n(4480),l=n(3714),I=n(6218),p=n(3965),r=n(4104),c=n(6031),t=n(8926),f=n(4067),T=n(375),A=n(8672),Z=n(5219),x=n(3722),b=n(6814),E=n(1230);function z(i,v){1&i&&(t.TgZ(0,"label",11),t._uU(1,"Nombre de la instituci\xf3n"),t.qZA())}function F(i,v){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"span",13),t._UZ(2,"i",14),t.qZA(),t.TgZ(3,"p-fileUpload",15),t.NdJ("onSelect",function(a){t.CHM(e);const C=t.oxw(2);return t.KtG(C.onLogoSelect(a))}),t.qZA()()}2&i&&(t.xp6(3),t.Q6J("auto",!0))}function J(i,v){if(1&i){const e=t.EpF();t.TgZ(0,"div",16),t._UZ(1,"img",17),t.TgZ(2,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.actualizarLogo())}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.logoActual,t.LSH)}}function D(i,v){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"span",3),t._UZ(3,"i",4),t.TgZ(4,"input",5),t.NdJ("ngModelChange",function(a){t.CHM(e);const C=t.oxw();return t.KtG(C.nombreInstitucion=a)}),t.qZA(),t.YNc(5,z,2,0,"label",6),t.qZA()(),t.TgZ(6,"div",2),t.YNc(7,F,4,1,"div",7),t.YNc(8,J,3,1,"div",8),t.qZA()(),t.TgZ(9,"div",9)(10,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveCompany())}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.nombreInstitucion),t.xp6(1),t.Q6J("ngIf",!e.nombreInstitucion),t.xp6(2),t.Q6J("ngIf",!e.logoActual),t.xp6(1),t.Q6J("ngIf",e.logoActual),t.xp6(2),t.Q6J("disabled",!e.nombreInstitucion)}}let R=(()=>{class i{constructor(e,s,a){this.generalService=e,this.helpersService=s,this.spinner=a,this.nombreInstitucion="",this.logoActual=null,this.logoFile=null,this.domain_id=0,this.loading=!1,this.domain_id=this.helpersService.getDominioId()}ngOnInit(){this.getCompany()}getCompany(){this.spinner.show(),this.loading=!0,this.generalService.getCompany(this.domain_id).subscribe(e=>{this.nombreInstitucion=e.data.name,this.logoActual=e.data.logo_url,this.loading=!1,this.spinner.hide()},e=>{this.helpersService.showErrorMessage("Error al obtener la instituci\xf3n"),this.loading=!1,this.spinner.hide()})}saveCompany(){const e=new FormData;e.append("nombreInstitucion",this.nombreInstitucion),e.append("domain_id",this.domain_id.toString()),this.logoFile&&e.append("logo",this.logoFile),this.spinner.show(),this.loading=!0,this.generalService.saveCompany(e).subscribe(s=>{this.helpersService.showSuccessMessage("Instituci\xf3n actualizada correctamente"),this.loading=!1,this.spinner.hide()},s=>{this.helpersService.showErrorMessage("Error al actualizar la instituci\xf3n"),this.loading=!1,this.spinner.hide()})}onLogoSelect(e){this.logoFile=e.files[0];const s=new FileReader;s.onload=a=>{this.logoActual=a.target.result},this.logoFile&&s.readAsDataURL(this.logoFile)}actualizarLogo(){this.logoActual=null,this.logoFile=null}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(f.m),t.Y36(T.$),t.Y36(A.t2))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-configuracion-empresa"]],decls:2,vars:0,consts:[["pTemplate","content"],[1,"grid","p-fluid"],[1,"field","col-12","md:col-6"],[1,"p-float-label","p-input-icon-left","w-full"],[1,"pi","pi-building"],["type","text","id","institucion","pInputText","",1,"w-full","p-inputtext","p-component","p-element","ng-pristine",3,"ngModel","ngModelChange"],["for","institucion",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],["class","flex align-items-center",4,"ngIf"],[1,"flex","justify-center","mt-4"],["pButton","","type","button","label","Guardar",1,"p-button-success","mr-2",3,"disabled","click"],["for","institucion"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-image"],["mode","basic","chooseLabel","Seleccionar logo","name","logo","accept","image/*","styleClass","p-button-secondary",3,"auto","onSelect"],[1,"flex","align-items-center"],["alt","Logo actual",1,"mr-3",2,"max-width","100px","max-height","100px",3,"src"],["pButton","","type","button","icon","pi pi-refresh","label","Actualizar logo",1,"p-button-secondary",3,"click"]],template:function(s,a){1&s&&(t.TgZ(0,"p-panel"),t.YNc(1,D,11,5,"ng-template",0),t.qZA())},dependencies:[Z.jx,x.p,d.Hq,b.O5,E.s,o.Fj,o.JJ,o.On]})}return i})();var S=n(8007),B=n(3999),H=n(3904),O=n(1494),L=n(5118),y=n(9537),U=n(4055),Y=n(6651),N=n(6022),K=n(7902),Q=n(9552),j=n(6804),P=n(3259);let G=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({providers:[c.P],imports:[S.Bz.forChild([{path:"",component:R}]),S.Bz,E.Q,o.u5,y.Z_,m._8,Q.U$,N.Xt,d.hJ,K.JH,o.UX,l.j,I.A,j.KZ,h.T,U.q4,p.kW,Y.q,r.EV,O.n,x.O,P.z,H.D,y.Z_,u.S,L.DL,B.aw]})}return i})()},6218:(M,g,n)=>{n.d(g,{A:()=>h,g:()=>d});var o=n(8926),m=n(6814),u=n(6223);let d=(()=>{class l{el;ngModel;control;cd;autoResize;onResize=new o.vpe;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(p,r,c,t){this.el=p,this.ngModel=r,this.control=c,this.cd=t}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewChecked(){this.updateState()}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(p){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(p){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(p||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(r){return new(r||l)(o.Y36(o.SBq),o.Y36(u.On,8),o.Y36(u.a5,8),o.Y36(o.sBO))};static \u0275dir=o.lG2({type:l,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(r,c){1&r&&o.NdJ("input",function(f){return c.onInput(f)}),2&r&&o.ekj("p-filled",c.filled)("p-inputtextarea-resizable",c.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}})}return l})(),h=(()=>{class l{static \u0275fac=function(r){return new(r||l)};static \u0275mod=o.oAB({type:l});static \u0275inj=o.cJS({imports:[m.ez]})}return l})()}}]);