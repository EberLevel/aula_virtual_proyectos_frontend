"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[6499],{5924:(b,C,s)=>{s.d(C,{V:()=>O});var a=s(3519),g=s.n(a),t=s(8926),h=s(5118),p=s(4067),c=s(375),_=s(4474),l=s(6814),d=s(6223),u=s(707),v=s(5219),M=s(3714),T=s(3965),E=s(1230),x=s(9537);function D(r,m){1&r&&(t.TgZ(0,"span"),t._uU(1,"Registrar Cursos"),t.qZA())}function A(r,m){1&r&&(t.TgZ(0,"span"),t._uU(1,"Visualizar Curso"),t.qZA())}function Z(r,m){1&r&&(t.TgZ(0,"span"),t._uU(1,"Editar Curso"),t.qZA())}function I(r,m){if(1&r&&(t.TgZ(0,"span",2),t.YNc(1,D,2,0,"span",3),t.YNc(2,A,2,0,"span",3),t.YNc(3,Z,2,0,"span",3),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngIf","add"===o.acciones),t.xp6(1),t.Q6J("ngIf","ver"===o.acciones),t.xp6(1),t.Q6J("ngIf","editar"===o.acciones)}}function F(r,m){if(1&r){const o=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(o);const e=t.oxw(2);return t.KtG(e.GuardarCurso())}),t.qZA()}}function R(r,m){if(1&r){const o=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(o);const e=t.oxw(2);return t.KtG(e.editarCurso())}),t.qZA()}}const w=function(){return{height:"90px"}};function P(r,m){if(1&r){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7)(4,"input",8),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.codigo=e)}),t.qZA(),t.TgZ(5,"label",9),t._uU(6,"C\xf3digo"),t.qZA()()(),t.TgZ(7,"div",6)(8,"span",7)(9,"input",8),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.nombreCurso=e)}),t.qZA(),t.TgZ(10,"label",9),t._uU(11,"Nombre de curso"),t.qZA()()()()(),t.TgZ(12,"div",4)(13,"div",5)(14,"div",10)(15,"span",7)(16,"p-dropdown",11),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.ciclo=e)}),t.qZA(),t.TgZ(17,"label",12),t._uU(18,"Ciclo "),t.qZA(),t.TgZ(19,"small",13),t._uU(20,"Campo obligatorio * "),t.qZA()()(),t.TgZ(21,"div",6)(22,"span",7)(23,"p-dropdown",14),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.areaFormacion=e)}),t.qZA(),t.TgZ(24,"label",15),t._uU(25,"\xc1reas de formaci\xf3n "),t.qZA(),t.TgZ(26,"small",13),t._uU(27,"Campo obligatorio * "),t.qZA()()()()(),t.TgZ(28,"div",4)(29,"div",5)(30,"div",10)(31,"span",7)(32,"p-dropdown",16),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.moduloFormativo=e)}),t.qZA(),t.TgZ(33,"label",17),t._uU(34,"M\xf3dulo formativo "),t.qZA(),t.TgZ(35,"small",13),t._uU(36,"Campo obligatorio * "),t.qZA()()(),t.TgZ(37,"div",6)(38,"span",7)(39,"input",8),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.cantidadCreditos=e)}),t.qZA(),t.TgZ(40,"label",9),t._uU(41,"Cantidad de cr\xe9ditos"),t.qZA()()()()(),t.TgZ(42,"div",4)(43,"div",5)(44,"div",6)(45,"span",7)(46,"input",8),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.porcentajeCreditos=e)}),t.qZA(),t.TgZ(47,"label",9),t._uU(48,"% de cr\xe9ditos"),t.qZA()()(),t.TgZ(49,"div",6)(50,"span",7)(51,"input",8),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.cantidadHoras=e)}),t.qZA(),t.TgZ(52,"label",9),t._uU(53,"Cantidad de horas"),t.qZA()()()()(),t.TgZ(54,"div",18)(55,"div",5)(56,"div",19)(57,"label",20),t._uU(58,"Digite el syllabus"),t.qZA(),t.TgZ(59,"p-editor",21),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.syllabus=e)}),t.qZA()()()(),t.TgZ(60,"div",4)(61,"div",5)(62,"div",10)(63,"span",7)(64,"p-dropdown",22),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.asignacionDocentes=e)}),t.qZA(),t.TgZ(65,"label",23),t._uU(66,"Asignaci\xf3n de docentes "),t.qZA(),t.TgZ(67,"small",13),t._uU(68,"Campo obligatorio * "),t.qZA()()(),t.TgZ(69,"div",6)(70,"span",7)(71,"p-dropdown",24),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw();return t.KtG(i.estado=e)}),t.qZA(),t.TgZ(72,"label",25),t._uU(73,"Estado"),t.qZA(),t.TgZ(74,"small",13),t._uU(75,"Campo obligatorio * "),t.qZA()()()()(),t.TgZ(76,"div",4)(77,"div",26)(78,"div",27),t.YNc(79,F,1,0,"button",28),t.YNc(80,R,1,0,"button",29),t.TgZ(81,"button",30),t.NdJ("click",function(){t.CHM(o);const e=t.oxw();return t.KtG(e.closeModal())}),t.qZA()()()()}if(2&r){const o=t.oxw();t.xp6(4),t.Q6J("ngModel",o.codigo)("disabled","ver"===o.acciones),t.xp6(5),t.Q6J("ngModel",o.nombreCurso)("disabled","ver"===o.acciones),t.xp6(7),t.Q6J("options",o.ciclos)("ngModel",o.ciclo)("disabled","ver"===o.acciones),t.xp6(7),t.Q6J("options",o.areasFormacion)("ngModel",o.areaFormacion)("disabled","ver"===o.acciones),t.xp6(9),t.Q6J("options",o.modulosFormativos)("ngModel",o.moduloFormativo)("disabled","ver"===o.acciones),t.xp6(7),t.Q6J("ngModel",o.cantidadCreditos)("disabled","ver"===o.acciones),t.xp6(7),t.Q6J("ngModel",o.porcentajeCreditos)("disabled","ver"===o.acciones),t.xp6(5),t.Q6J("ngModel",o.cantidadHoras)("disabled","ver"===o.acciones),t.xp6(8),t.Akn(t.DdM(31,w)),t.Q6J("ngModel",o.syllabus)("disabled","ver"===o.acciones),t.xp6(5),t.Q6J("options",o.asignacionesDocentes)("ngModel",o.asignacionDocentes)("disabled","ver"===o.acciones),t.xp6(7),t.Q6J("options",o.estados)("ngModel",o.estado)("disabled","ver"===o.acciones),t.xp6(8),t.Q6J("ngIf","add"===o.acciones),t.xp6(1),t.Q6J("ngIf","editar"===o.acciones)}}let O=(()=>{class r{constructor(o,n,e,i,f){this.ref=o,this.parametroService=n,this.config=e,this.helperService=i,this.commonService=f,this.id=0,this.cantidadTotalCreditos=0,this.codigo="",this.nombreCurso="",this.ciclo={},this.ciclos=[],this.areaFormacion={},this.areasFormacion=[],this.moduloFormativo={},this.modulosFormativos=[],this.cantidadCreditos=0,this.porcentajeCreditos=0,this.cantidadHoras=0,this.syllabus="",this.asignacionDocentes={},this.asignacionesDocentes=[],this.estados=[],this.estado={},this.acciones="",this.domain_id=1}ngOnInit(){this.id=this.config.data.id,this.cantidadTotalCreditos=this.config.data.total_creditos,this.acciones=this.config.data.acciones,this.domain_id=this.helperService.getDominioId(),Promise.all([this.listarModulosFormativos(),this.listarAreasFormacion(),this.listarCiclos(),this.listarEstados(),this.listarDocentes(this.domain_id)]).then(()=>{("editar"===this.config.data.acciones||"ver"===this.config.data.acciones)&&(console.log(this.config.data.data),this.codigo=this.config.data.data.codigo,this.nombreCurso=this.config.data.data.nombre,this.ciclo=this.config.data.data.ciclo_id,this.areaFormacion=this.config.data.data.area_de_formacion_id,this.moduloFormativo=this.config.data.data.modulo_formativo_id,this.cantidadCreditos=this.config.data.data.cantidad_de_creditos,this.porcentajeCreditos=this.config.data.data.porcentaje_de_creditos,this.cantidadHoras=this.config.data.data.cantidad_de_horas,this.syllabus=this.config.data.data.syllabus,this.asignacionDocentes=this.config.data.data.docente_id,this.estado=this.config.data.data.estado_id)})}GuardarCurso(){console.log(this.asignacionDocentes);const o={codigo:this.codigo,nombreCurso:this.nombreCurso,cicloId:this.ciclo,areaFormacionId:this.areaFormacion,moduloFormativoId:this.moduloFormativo,cantidadCreditos:this.cantidadCreditos,porcentajeCreditos:this.porcentajeCreditos,cantidadHoras:this.cantidadHoras,syllabus:this.syllabus,asignacionDocentesId:this.asignacionDocentes,carreraId:this.id,estadoId:this.estado,domain_id:this.domain_id};o?this.parametroService.guardarCurso(o).subscribe(n=>{this.closeModal(),g().fire({title:"\xa1\xc9xito!",text:"Los Datos se registraron correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})},n=>{console.error("Error al guardar el parametro",n)}):console.error("Formulario inv\xe1lido")}editarCurso(){const o={codigo:this.codigo,nombreCurso:this.nombreCurso,cicloId:this.ciclo,areaFormacionId:this.areaFormacion,moduloFormativoId:this.moduloFormativo,cantidadCreditos:this.cantidadCreditos,porcentajeCreditos:this.porcentajeCreditos,cantidadHoras:this.cantidadHoras,syllabus:this.syllabus,asignacionDocentesId:this.asignacionDocentes?.code,carreraId:this.id,estadoId:this.estado,cursoId:this.config.data.data.id,domain_id:this.domain_id};console.log("Curso a guardar",o),o?this.parametroService.actualizarCurso(o).subscribe(n=>{this.closeModal(),g().fire({title:"\xa1\xc9xito!",text:"Los Datos se registraron correctamente",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})},n=>{console.error("Error al guardar el parametro",n)}):console.error("Formulario inv\xe1lido")}onCantidadCreditosChange(o){if(0===this.cantidadTotalCreditos||null==this.cantidadTotalCreditos)this.porcentajeCreditos=100;else{console.log("Cantidad de cr\xe9ditos ha cambiado:",o),console.log("Cantidad total de cr\xe9ditos:",this.cantidadTotalCreditos);const n=o/this.cantidadTotalCreditos*100;this.porcentajeCreditos=n,console.log("Resultado del c\xe1lculo:",n)}}listarModulosFormativos(){return new Promise((o,n)=>{this.parametroService.getModuloFormativo().subscribe(e=>{console.log("Lista de listarModulosFormativos",e),this.modulosFormativos=e,o()},e=>n(e))})}listarAreasFormacion(){return new Promise((o,n)=>{this.parametroService.getAreaDeFormacion().subscribe(e=>{console.log("Lista de listarAreasFormacion",e),this.areasFormacion=e,o()},e=>n(e))})}listarCiclos(){return new Promise((o,n)=>{this.parametroService.getCiclo().subscribe(e=>{console.log("Lista de listarCiclos",e),this.ciclos=e,o()},e=>n(e))})}listarEstados(){return new Promise((o,n)=>{this.parametroService.getEstados().subscribe(e=>{console.log("Lista de listarEstados",e),this.estados=e,o()},e=>n(e))})}listarDocentes(o){return new Promise((n,e)=>{this.commonService.getDocentesDropdown(this.domain_id).subscribe(i=>{console.log("Lista de listarDocentes",i),this.asignacionesDocentes=i.map(f=>({label:f.nombres,value:f.id})),n()},i=>e(i))})}closeModal(){this.ref.close({register:!1})}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(h.E7),t.Y36(p.m),t.Y36(h.S),t.Y36(c.$),t.Y36(_.v))};static#o=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-reg-cursos"]],decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"text-primary","font-semibold","text-xl"],[4,"ngIf"],[1,"row"],[1,"grid","p-fluid"],[1,"field","col-12","md:col-6"],[1,"p-float-label"],["type","text","pInputText","",3,"ngModel","disabled","ngModelChange"],[1,"required"],[1,"field","md:col-6"],["inputId","dropdownCiclo","optionLabel","tx_item_description","optionValue","nu_id_parametro",3,"options","ngModel","disabled","ngModelChange"],["for","dropdownCiclo"],[2,"color","brown"],["inputId","dropdownAreaFormacion","optionLabel","tx_item_description","optionValue","nu_id_parametro",3,"options","ngModel","disabled","ngModelChange"],["for","dropdownAreaFormacion"],["inputId","dropdownModuloFormativo","optionLabel","tx_item_description","optionValue","nu_id_parametro",3,"options","ngModel","disabled","ngModelChange"],["for","dropdownModuloFormativo"],[1,"row","mt-2"],[1,"field","col-12","md:col-12"],["for",""],[3,"ngModel","disabled","ngModelChange"],["inputId","dropdownAsignacionDocentes","optionLabel","label","optionValue","value",3,"options","ngModel","disabled","ngModelChange"],["for","dropdownAsignacionDocentes"],["inputId","dropdownEstado","optionLabel","tx_item_description","optionValue","nu_id_parametro",3,"options","ngModel","disabled","ngModelChange"],["for","dropdownEstado"],[1,"flex","justify-content-end","flex-column","sm:flex-row"],[1,"flex","flex-wrap","gap-2"],["pButton","","icon","pi pi-plus","label","Guardar","iconPos","right","class","p-button-success p-button-sm",3,"click",4,"ngIf"],["pButton","","icon","pi pi-pencil","label","Editar Curso","iconPos","right","class","p-button-warning p-button-sm",3,"click",4,"ngIf"],["pButton","","label","Cerrar","icon","pi pi-times","iconPos","right",1,"p-button-close-clean",3,"click"],["pButton","","icon","pi pi-plus","label","Guardar","iconPos","right",1,"p-button-success","p-button-sm",3,"click"],["pButton","","icon","pi pi-pencil","label","Editar Curso","iconPos","right",1,"p-button-warning","p-button-sm",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"p-panel"),t.YNc(1,I,4,3,"ng-template",0),t.YNc(2,P,82,32,"ng-template",1),t.qZA())},dependencies:[l.O5,d.Fj,d.JJ,d.On,u.Hq,v.jx,M.o,T.Lt,E.s,x.ML]})}return r})()},4474:(b,C,s)=>{s.d(C,{v:()=>h});var a=s(9862),g=s(5516),t=s(8926);let h=(()=>{class p{constructor(_,l,d){this.http=_,this.httpClientFormData=l,this.handler=d,this.baseUrl=`${g.N.API_BASE}`,this.urlparametro=`${g.N.API_BASE}`,this.httpOptions={headers:new a.WM({"Content-Type":"application/json"})},this.httpClientFormData=new a.eN(this.handler)}getCarrerasDropdown(_){return this.http.get(`${this.baseUrl}carreras-dropdown/${_}`)}getCiclosDropdown(_){return this.http.get(`${this.baseUrl}ciclos-dropdown/${_}`)}getRolesDropdown(){return this.http.get(`${this.baseUrl}roles-dropdown`)}getDocentesDropdown(_){return this.http.get(`${this.baseUrl}docentes-dropdown/${_}`)}static#t=this.\u0275fac=function(l){return new(l||p)(t.LFG(a.eN),t.LFG(a.eN),t.LFG(a.jN))};static#o=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},6218:(b,C,s)=>{s.d(C,{A:()=>p,g:()=>h});var a=s(8926),g=s(6814),t=s(6223);let h=(()=>{class c{el;ngModel;control;cd;autoResize;onResize=new a.vpe;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(l,d,u,v){this.el=l,this.ngModel=d,this.control=u,this.cd=v}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewChecked(){this.updateState()}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(l){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(l){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(l||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(d){return new(d||c)(a.Y36(a.SBq),a.Y36(t.On,8),a.Y36(t.a5,8),a.Y36(a.sBO))};static \u0275dir=a.lG2({type:c,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(d,u){1&d&&a.NdJ("input",function(M){return u.onInput(M)}),2&d&&a.ekj("p-filled",u.filled)("p-inputtextarea-resizable",u.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}})}return c})(),p=(()=>{class c{static \u0275fac=function(d){return new(d||c)};static \u0275mod=a.oAB({type:c});static \u0275inj=a.cJS({imports:[g.ez]})}return c})()}}]);