"use strict";(self.webpackChunkapollo_ng=self.webpackChunkapollo_ng||[]).push([[6761],{6761:(T,h,t)=>{t.r(h),t.d(h,{ForoAlumnosRoutingModule:()=>K});var s=t(8007),f=t(1230),g=t(6223),C=t(6760),M=t(9552),a=t(6022),x=t(707),c=t(7902),l=t(3714),p=t(6218),v=t(6804),b=t(4480),Z=t(4055),R=t(3965),P=t(6651),D=t(4104),E=t(1494),S=t(3722),z=t(3259),J=t(3904),y=t(9537),F=t(3530),U=t(5118),_=t(3999),e=t(8926),I=t(7649),B=t(375),O=t(6814),A=t(5219);function j(i,u){1&i&&(e.TgZ(0,"span",7),e._uU(1,"Foros"),e.qZA())}function N(i,u){if(1&i&&(e.TgZ(0,"li")(1,"strong"),e._uU(2,"Alumno:"),e.qZA(),e._uU(3),e._UZ(4,"br"),e.TgZ(5,"strong"),e._uU(6,"Respuesta:"),e.qZA(),e._uU(7),e._UZ(8,"br"),e.TgZ(9,"strong"),e._uU(10,"Fecha:"),e.qZA(),e._uU(11),e.qZA()),2&i){const n=u.$implicit;e.xp6(3),e.hij(" ",n.alumno," "),e.xp6(4),e.hij(" ",n.respuesta," "),e.xp6(4),e.hij(" ",n.fecha," ")}}const Y=function(i){return{disabled:i}};function H(i,u){if(1&i){const n=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"i",12),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"span",13),e._uU(6),e.qZA()(),e.TgZ(7,"ul"),e.YNc(8,N,12,3,"li",2),e.qZA(),e.TgZ(9,"button",14),e.NdJ("click",function(){const d=e.CHM(n).$implicit,m=e.oxw(2);return e.KtG(m.selectForo(d))}),e._uU(10," Responder "),e.qZA()()}if(2&i){const n=u.$implicit,o=e.oxw(2);e.xp6(4),e.AsE("Inicio: ",n.fecha_inicio," | Fin: ",n.fecha_fin,""),e.xp6(1),e.Q6J("ngClass",o.getDaysRemainingClass(n.fecha_fin)),e.xp6(1),e.hij(" (",o.getDaysRemaining(n.fecha_fin)," d\xedas restantes) "),e.xp6(2),e.Q6J("ngForOf",n.respuestas),e.xp6(1),e.Q6J("disabled",o.isExpired(n.fecha_fin))("ngClass",e.VKq(7,Y,o.isExpired(n.fecha_fin)))}}function Q(i,u){if(1&i&&(e.TgZ(0,"div")(1,"div",8)(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"h3"),e._uU(5),e.qZA()(),e.YNc(6,H,11,9,"div",9),e.qZA()),2&i){const n=u.$implicit;e.xp6(3),e.hij("Curso:",n.curso_name,""),e.xp6(2),e.hij("Docente:",n.docente_name,""),e.xp6(1),e.Q6J("ngForOf",n.foros)}}let $=(()=>{class i{constructor(n,o){this.foroService=n,this.helperService=o,this.foros=[],this.selectedForo=null,this.newResponse=""}ngOnInit(){const n=this.helperService.getDominioId();this.foroService.getForos(n).subscribe(o=>{this.foros=o.map(r=>(r.foros=r.foros.map(d=>({...d,respuestas:JSON.parse(d.respuestas)})),r)),console.log("Foros:",this.foros)})}selectForo(n){this.selectedForo=n,console.log("Foro seleccionado:",n),this.newResponse=""}isExpired(n){return new Date>new Date(n)}submitResponse(){if(this.selectedForo&&this.newResponse){const n={id_foro:this.selectedForo.id_foro,respuesta:this.newResponse,domain_id:this.helperService.getDominioId()};console.log("Respuesta enviada:",n),console.log("Respuesta enviada:",this.newResponse),this.newResponse="",this.selectedForo=null}}getDaysRemaining(n){const o=new Date,d=new Date(n).getTime()-o.getTime();return Math.ceil(d/864e5)}getDaysRemainingClass(n){const o=this.getDaysRemaining(n);return o<0?"days-remaining overdue":o<=7?"days-remaining due-soon":"days-remaining on-time"}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(I.f),e.Y36(B.$))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-foro-alumnos"]],decls:8,vars:4,consts:[["header",""],["pTemplate","header"],[4,"ngFor","ngForOf"],["header","Dejar una respuesta",3,"visible","modal","visibleChange"],["styleClass","rich-text-editor",3,"ngModel","ngModelChange"],["pButton","","type","button","label","Enviar",3,"click"],["pButton","","type","button","label","Cancelar",3,"click"],[1,"text-primary","font-semibold","text-xl"],[1,"forum-header"],["class","forum-detail",4,"ngFor","ngForOf"],[1,"forum-detail"],[1,"forum-dates"],[1,"pi","pi-calendar"],[3,"ngClass"],[3,"disabled","ngClass","click"]],template:function(o,r){1&o&&(e.TgZ(0,"p-panel",0),e.YNc(1,j,2,0,"ng-template",1),e.YNc(2,Q,7,3,"div",2),e.qZA(),e.TgZ(3,"p-dialog",3),e.NdJ("visibleChange",function(m){return r.selectedForo=m}),e.TgZ(4,"p-editor",4),e.NdJ("ngModelChange",function(m){return r.newResponse=m}),e.qZA(),e.TgZ(5,"p-footer")(6,"button",5),e.NdJ("click",function(){return r.submitResponse()}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return r.selectedForo=null}),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("ngForOf",r.foros),e.xp6(1),e.Q6J("visible",r.selectedForo)("modal",!0),e.xp6(1),e.Q6J("ngModel",r.newResponse))},dependencies:[O.mk,O.sg,A.$_,A.jx,f.s,g.JJ,g.On,y.ML,F.V,x.Hq],styles:["p-panel[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;padding:1rem;background-color:#f5f5f5}p-panel[_ngcontent-%COMP%]   .text-primary[_ngcontent-%COMP%]{color:#007bff}p-panel[_ngcontent-%COMP%]   .ui-panel-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;border-bottom:1px solid #ddd;padding-bottom:.5rem;margin-bottom:1rem}.forum-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.forum-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .forum-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.forum-detail[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;padding:1rem;margin-bottom:1rem}.forum-dates[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.forum-dates[_ngcontent-%COMP%]   i.pi-calendar[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:.5rem}.forum-dates[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:1rem}.days-remaining[_ngcontent-%COMP%]{font-weight:700}.days-remaining.due-soon[_ngcontent-%COMP%]{color:#ff5722}.days-remaining.on-time[_ngcontent-%COMP%]{color:#4caf50}.days-remaining.overdue[_ngcontent-%COMP%]{color:#f44336}button[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:1rem;transition:background-color .3s,opacity .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button.disabled[_ngcontent-%COMP%]{background-color:#6c757d;cursor:not-allowed;opacity:.6}button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed;opacity:.6}p-dialog[_ngcontent-%COMP%]{max-width:600px;border-radius:8px}.p-editor[_ngcontent-%COMP%]{margin-bottom:1rem}"]})}return i})(),K=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[s.Bz.forChild([{path:"",component:$}]),s.Bz,f.Q,g.u5,y.Z_,C._8,M.U$,a.Xt,x.hJ,c.JH,g.UX,l.j,p.A,v.KZ,b.T,Z.q4,R.kW,P.q,D.EV,E.n,S.O,z.z,J.D,y.Z_,F.S,U.DL,_.aw]})}return i})()},6218:(T,h,t)=>{t.d(h,{A:()=>M,g:()=>C});var s=t(8926),f=t(6814),g=t(6223);let C=(()=>{class a{el;ngModel;control;cd;autoResize;onResize=new s.vpe;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(c,l,p,v){this.el=c,this.ngModel=l,this.control=p,this.cd=v}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewChecked(){this.updateState()}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(c){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(c){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(c||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(l){return new(l||a)(s.Y36(s.SBq),s.Y36(g.On,8),s.Y36(g.a5,8),s.Y36(s.sBO))};static \u0275dir=s.lG2({type:a,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(l,p){1&l&&s.NdJ("input",function(b){return p.onInput(b)}),2&l&&s.ekj("p-filled",p.filled)("p-inputtextarea-resizable",p.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}})}return a})(),M=(()=>{class a{static \u0275fac=function(l){return new(l||a)};static \u0275mod=s.oAB({type:a});static \u0275inj=s.cJS({imports:[f.ez]})}return a})()}}]);